<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,minimal-ui"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" title="zenxme" href="/atom.xml"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.1.1/css/all.min.css"><script src="https://cdn.staticfile.org/highlight.js/11.5.1/highlight.min.js"></script><script>!function(t){"use strict";!function(s){var e=window,i=document,r=t,c="".concat("https:"===i.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=i.createElement("script"),o=i.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=c,n.id="LA_COLLECT",r.d=n;var a=function(){e.LA.ids.push(r)};e.LA?e.LA.ids&&a():(e.LA=t,e.LA.ids=[],a()),o.parentNode.insertBefore(n,o)}()}({id:"Jr1ziSrOWozk1Oug",ck:"Jr1ziSrOWozk1Oug"})</script><link rel="stylesheet" href="/css/tailwind.css"><link rel="stylesheet" href="/css/site.css"><script src="/js/site.js"></script><title>Dgraph 数据库简单总结 - zenxme</title><meta name="generator" content="Hexo 5.4.2"></head><body><nav class="flex justify-center border-b border-gray-200 h-14"><div class="container flex items-center justify-center"><div class="w-10 h-10"><a href="/"><img src="/favicon_transparent.png" alt="logo"></a></div><div class="relative flex content-center h-full ml-14"><a class="flex h-full font-bold items-center hover:text-blue-500" href="/">首页</a></div><div class="relative flex content-center h-full ml-14"><a class="flex h-full font-bold items-center hover:text-blue-500" href="/tags">标签</a></div><div class="relative flex content-center h-full ml-14"><a class="flex h-full font-bold items-center hover:text-blue-500" href="/about">关于</a></div></div></nav><div class="flex justify-center my-0 sm:my-4"><div class="container flex justify-center"><article id="article" class="hidden w-full px-4 py-4 pb-12 mx-0 border-0 border-gray-300 sm:rounded md:mx-1 md:w-5/6 lg:w-[1200px] md:px-8 lg:px-28 lg:py-8"><h1>Dgraph 数据库简单总结</h1><div class="flex justify-center mb-8 text-xs text-gray-500"><span class="mr-10">2019-07-15</span><div><a class="mr-4 hover:bg-gray-200" href="/tags/dgraph/"><i class="align-middle fas fa-tag"></i> dgraph </a><a class="mr-4 hover:bg-gray-200" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><i class="align-middle fas fa-tag"></i> 数据库</a></div></div><p></p><p>dgraph 是一个可扩展的，分布式的，低延迟图形数据库。</p><h2 id="安装-dgraph"><a href="#安装-dgraph" class="headerlink" title="安装 dgraph"></a>安装 dgraph</h2><p>在 linux 系统上，可以这样安装：</p><pre><code class="bash">curl https://get.dgraph.io -sSf | bash
</code></pre><p>如果要使用 docker 或者从其他系统上，可以参考 <a target="_blank" rel="noopener" href="https://docs.dgraph.io/get-started/#step-1-install-dgraph">https://docs.dgraph.io/get-started/#step-1-install-dgraph</a></p><h2 id="启动-dgraph"><a href="#启动-dgraph" class="headerlink" title="启动 dgraph"></a>启动 dgraph</h2><p>开 3 个 terminal，依次启动下面的 3 个程序</p><pre><code class="bash">dgraph zero
</code></pre><pre><code class="bash">dgraph alpha --lru_mb 2048 --zero localhost:5080
</code></pre><pre><code class="bash">dgraph-ratel
</code></pre><p>之后，访问<code>http://localhost:8000/</code>就可以看到一个图形化的界面。</p><h2 id="端口的使用"><a href="#端口的使用" class="headerlink" title="端口的使用"></a>端口的使用</h2><table><thead><tr><th align="center">Dgraph Node Type</th><th align="center">gRPC-internal</th><th align="center">gRPC-external</th><th align="center">HTTP-external</th></tr></thead><tbody><tr><td align="center">zero</td><td align="center">–Not Used–</td><td align="center">5080</td><td align="center">6080</td></tr><tr><td align="center">alpha</td><td align="center">7080</td><td align="center">9080</td><td align="center">8080</td></tr><tr><td align="center">ratel</td><td align="center">–Not Used–</td><td align="center">–Not Used–</td><td align="center">8000</td></tr></tbody></table><h2 id="加载数据"><a href="#加载数据" class="headerlink" title="加载数据"></a>加载数据</h2><p>若要在运行中实时加载数据和 schema 文件，可以使用如下的命令。</p><pre><code class="bash">dgraph live -r g01.rdf.gz -s g01.schema -d localhost:9080 -z localhost:5080
</code></pre><p>详见：<a target="_blank" rel="noopener" href="https://docs.dgraph.io/deploy/#fast-data-loading">https://docs.dgraph.io/deploy/#fast-data-loading</a></p><h2 id="插入和查询数据"><a href="#插入和查询数据" class="headerlink" title="插入和查询数据"></a>插入和查询数据</h2><p>有很多官方的和非官方的客户端，甚至可以使用 HTTP 请求来做到。</p><p>详见：<a target="_blank" rel="noopener" href="https://docs.dgraph.io/clients/">https://docs.dgraph.io/clients/</a></p><h2 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h2><pre><code class="bash">curl localhost:8080/admin/export
</code></pre><p>在服务器本地，向<code>localhost:8080/admin/export</code>发出<code>GET</code>请求就行了，可以导出到<code>~/export</code>文件夹下。</p><p>其它的用法，都可以查阅官方文档：<a target="_blank" rel="noopener" href="https://docs.dgraph.io/">https://docs.dgraph.io/</a>。</p><p></p></article></div></div></body></html>